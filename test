
// TODO: move Create operations to separate php file
function _insert_new_item($item_type, $item_title, $author_id)
{
    return	SQL::run(
		"INSERT INTO titles SET type='%s', title='%s', author_id=CAST('%s' AS SIGNED)", // <-- probably can be done without CAST, but I don't know
		array($item_type, $item_title, $author_id));                                                  // proper formatting parameter 

    return $author_id;// TODO: return some better information here, and define standard for return value of Create operations 
}

function add_item_author($item_title, $author_name)
{
    // todo: transaction support
	SQL::run("INSERT INTO authors SET name='%s'", $author_name);

    $author_id_data= SQL::one("SELECT max(id) AS new_id FROM authors");
    $author_id = $author_id_data["new_id"];

    return _insert_new_item('book', $item_title, $author_id);
}

function add_item_author_id($item_title, $author_id)
{
    return _insert_new_item('book', $item_title, $author_id);
}
